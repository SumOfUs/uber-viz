---
title: How Uber Rolls
---
<style>

.states {
  fill: #ccc;
  stroke: #fff;
}
.issue-icon {
  background-image: url('/images/uber-sprite.png');
}
</style>

<script type="text/javascript" src='https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore.js'></script>
<script src="https://d3js.org/d3-array.v1.min.js"></script>
<script src="https://d3js.org/d3-geo.v1.min.js"></script>

<script src="https://d3js.org/d3-selection.v1.min.js"></script>

<script src="https://d3js.org/d3-collection.v1.min.js"></script>
<script src="https://d3js.org/d3-dispatch.v1.min.js"></script>
<script src="https://d3js.org/d3-request.v1.min.js"></script>

<script src="http://d3js.org/topojson.v1.min.js"></script>
<script>
var width = 960,
    height = 500;

var projection = d3.geoAlbersUsa();
var path = d3.geoPath()
    .projection(projection);

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);

// var icons = {
//   "Data issues": '01 or hard drive icon or server icon'
//   "Regulation": 'gavel or scroll'
//   "Worker classification": 'checkmark'
//   "Legacy industry": 'taxi car'
//   "Lobbying": 'whispering'
//   "Predatory finance": ''
//   "Pay":
//   "Corporate citizenship":
//   "Tax":
// };

var cityCoordinates = {
  austin: [-97.7431, 30.2672],
  boston: [-71.0589, 42.3601],
  california: [-119.4494, 37.1661],
  cambridge: [-71.1097, 42.3736],
  chicago: [-87.6298, 41.8781],
  cleveland: [-81.6944, 41.4993],
  denver: [-104.9903, 39.7392],
  detroit: [-83.0458, 42.3314],
  fort_worth: [-97.3308, 32.7555],
  houston: [-95.3698, 29.7604],
  illinois: [-89.503639, 39.739306],
  massachusetts: [-71.9252, 42.3771]
};

d3.json("/javascripts/us.json", function(error, us) {

  svg.append("path")
      .attr("class", "states")
      .datum(topojson.feature(us, us.objects.states))
      .attr("d", path);

  svg.selectAll("circle")
    .data(_.values(cityCoordinates)).enter()
    .append("circle")
    .attr("cx", function (d) { console.log(projection(d)); return projection(d)[0]; })
    .attr("cy", function (d) { return projection(d)[1]; })
    .attr("r", "8px")
    .attr('class', 'issue-icon')
    .attr("fill", "yellow");
});

</script>
